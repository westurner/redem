{% extends "base.jinja2" %}
<html>
<head>
  <title>{{ title }}</title>
</head>
<body>
    <div id="body">
    {% block content %}
    <div class="page-header">
      <h1><a id="summary" class="anchor" href="http://reddit.com/user/{{ username }}">{{ username }}</a>
          <small>reddit summary</small></h1>
      <div id="meta">
        <table class="table table-bordered table-hover table-condensed">
        {% for key in data['_meta'] %}
        <tr class="comment_{{key}}"><td >{{ key }}</td><td>{{ data['_meta'][key] }}</td></tr>
        {%- endfor -%}
      </table>   
      </div>
    </div>
    <div>
      <a id="comments" class="anchor"></a>
      <h2><a href="#top">comments</a></h2>

      <table class="table table-hover table-condensed tablesorter">
      <thead>
        <th>created</th>
        <th>title</th>
        <th>subreddit</th>
        <th>n-chars</th>
        <th>score</th>
      </thead>

      <tbody>
      {% for comment in data['comments'] %}
      <tr>
       <td style="white-space:nowrap">{{ comment['created'] }}</td>
       <td><a href="#comment:{{ comment['id'] }}">{{ comment['link_title'] }}</td>
       <td>{{ comment['subreddit'] }}</td>
       <td>{{ comment['charcount'] }}</td>
       <td>{{ comment['score'] }}</td>
      </tr>
      {% endfor %}
      </tbody>
      </table>

      {% for comment in data['comments'] %}
      <div class="row-fluid">
      <div class="span12">

      <div class="muted">
      <span><small>{{ comment['created'] }}</small>
      {% if comment['edited'] %}<strong>*</strong></span>
      <span><small>{{ comment['edited'] }}</small></span>
      {% else %}</span>{% endif %}
      <span><small>{{ comment['subreddit'] }}</small></span>
      </div>

      <h4>
        <a class="anchor" id="comment:{{ comment['id'] }}" href="{{ comment['permalink'] }}">
        {{ comment['link_title'] }}
        </a>
        <a class="headerlink" href="#comment:{{ comment['id'] }}">¶</a>
      </h4>

      <div class="comment_body well well-small">{{ comment['body_html']|safe }}</div>

      <table class="table table-striped table-hover table-condensed">
        {% for key in comment %}
        <tr class="comment_{{key}}"><td >{{ key }}</td><td>{{ comment[key] }}</td></tr>
        {%- endfor -%}
      </table>
      {#<pre class="pre-scrollable">{{ comment }}</pre>#}
      </div>
      </div>
      <hr />
      {% endfor %}
    </div>
    <div>
      <h2><a id="submissions" class="anchor" href="#top">submissions</a></h2>

      <table class="table table-hover table-condensed">
      <thead>
        <th>created</th>
        <th>title</th>
        <th>subreddit</th>
        <th>n-chars</th>
        <th>score</th>
      </thead>

      <tbody>
      {% for submission in data['submissions'] %}
      <tr>
       <td style="white-space:nowrap">{{ submission['created'] }}</td>
       <td><a href="#submission:{{ submission['id'] }}">{{ submission['title'] }}</td>
       <td>{{ submission['subreddit'] }}</td>
       <td>{{ submission['charcount'] }}</td>
       <td>{{ submission['score'] }}</td>
      </tr>
      {% endfor %}
      </tbody>
      </table>

      {% for submission in data['submissions'] %}
      <div class="muted">
      <span><small>{{ submission['created'] }}</small>
      {% if submission['edited'] %}<strong>*</strong></span>
      <span><small>{{ submission['edited'] }}</small></span>
      {% else %}</span>{% endif %}
      <span><small>{{ submission['subreddit'] }}</small></span>
      </div>
      <h4>
        <a class="anchor" id="submission:{{ submission['id'] }}" href="{{ submission['permalink'] }}">
        {{ submission['title'] }}
        </a>
        <a class="headerlink" href="#submission:{{ submission['id'] }}">¶</a>
      </h4>
      <a href="{{ submission['url'] }}">{{ submission['url'] }}</a>
      {% if submission['selftext_html'] %}
      <div class="selftext well well-small">
      {{ submission['selftext_html']|safe }}
      </div>
      {% endif %}
      <a class="btn btn-link" data-toggle="collapse" data-target="#stbl_{{ submission['id'] }}"><i class="icon-chevron-down"></i></a>
      <table id="stbl_{{ submission['id'] }}" class="table table-striped table-hover table-condensed collapse">
        {% for key in submission %}
        <tr class="submission_{{key}}"><td >{{ key }}</td><td>{{ submission[key] }}</td></tr>
        {%- endfor -%}
      </table>
      {# <pre class="pre-scrollable">{{ submission }}</pre> #}
      <hr />
      {% endfor %}
    </div>
  {% endblock content %}
  </div>
</body>
</html>
